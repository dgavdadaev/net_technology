---
lang: ru-RU
title: Лабораторная работа №8
subtitle: Адресация IPv4 и IPv6. Настройка маршрутизации
author:
  - Авдадаев Джамал Геланиевич
date: 04 февраля 2026

toc: false
slide_level: 2
aspectratio: 169
section-titles: true
theme: metropolis
---

# Цель работы

## Основная цель

Изучение принципов маршрутизации в IPv4- и IPv6-сетях и практическая настройка сетевого оборудования в среде моделирования **GNS3**.

# Ход выполнения работы

## Топология IPv6–IPv4

- Построена сеть в **GNS3**:
  - 3 маршрутизатора **VyOS**
  - 2 коммутатора Ethernet
  - 2 оконечных устройства **VPCS**
- Подключён анализатор трафика между **gw-01** и **gw-03**

![Топология сети IPv6–IPv4](Screenshot_1.png){ width=70% }

## Настройка IPv6 на PC1

- Назначен адрес: `1000::a/64`
- Конфигурация сохранена (`save`)
- Проверка параметров (`show ipv6`)

![Настройка IPv6 на PC1](Screenshot_2.png){ width=70% }

## Настройка IPv6 на PC2

- Назначен адрес: `1002::a/64`
- Конфигурация сохранена (`save`)
- Проверка параметров (`show ipv6`)

![Настройка IPv6 на PC2](Screenshot_3.png){ width=70% }

## Настройка VyOS gw-01

- `eth0`: IPv6 `1000::1/64` (LAN)
- `eth1`: IPv4 `10.0.0.1/8` (к gw-03)
- Включён Router Advertisement для `1000::/64`

![Конфигурация msk-dgavdadaev-gw-01](Screenshot_4.png){ width=70% }

## Настройка VyOS gw-02

- `eth0`: IPv6 `1002::1/64` (LAN)
- `eth1`: IPv4 `20.0.0.2/8` (к gw-03)
- Включён Router Advertisement для `1002::/64`

![Конфигурация msk-dgavdadaev-gw-02](Screenshot_5.png){ width=70% }

## Настройка VyOS gw-03

- Транзитный IPv4-узел
- `eth0`: `10.0.0.2/8`
- `eth1`: `20.0.0.1/8`

![Конфигурация msk-dgavdadaev-gw-03](Screenshot_6.png){ width=70% }

## Проверка RA и шлюза по умолчанию

- На VPCS отображаются link-local адреса маршрутизаторов
- Подтверждена работа Router Advertisement

![Проверка IPv6 на PC1](Screenshot_7.png){ width=70% }

![Проверка IPv6 на PC2](Screenshot_8.png){ width=70% }

## Проверка IPv4 до маршрутизации

- Успешный ping: `10.0.0.2`
- Ошибка *Network is unreachable* для `20.0.0.1` и `20.0.0.2`
- Причина: нет маршрутов к `20.0.0.0/8`

![Проверка ping с gw-01](Screenshot_9.png){ width=70% }

## Анализ ICMP и ARP

- Зафиксированы:
  - ICMP Echo Request / Reply
  - ARP-запросы и ответы

![Анализ ICMP и ARP трафика](Screenshot_10.png){ width=70% }

## Настройка RIP на gw-01

- Добавлена сеть: `10.0.0.0/8`
- Конфигурация применена и сохранена

![Настройка RIP на msk-dgavdadaev-gw-01](Screenshot_11.png){ width=70% }

## Настройка RIP на gw-02

- Добавлена сеть: `20.0.0.0/8`
- Конфигурация применена и сохранена

![Настройка RIP на msk-dgavdadaev-gw-02](Screenshot_12.png){ width=70% }

## Настройка RIP на gw-03

- Участие сразу в двух сетях:
  - `10.0.0.0/8`
  - `20.0.0.0/8`

![Настройка RIP на msk-dgavdadaev-gw-03](Screenshot_13.png){ width=70% }

## Проверка IPv4 после RIP

- Узлы `20.0.0.1` и `20.0.0.2` стали доступны
- Подтверждена корректная динамическая маршрутизация

![Проверка ping после настройки RIP](Screenshot_14.png){ width=70% }

## Анализ RIP и ICMP трафика

- В трафике наблюдаются:
  - RIPv2 на `224.0.0.9`
  - ICMP Echo Request / Reply
  - ARP

![Анализ RIP и ICMP трафика](Screenshot_15.png){ width=70% }

## Настройка туннеля на gw-01

- Интерфейс: `tun0`
- SIT, источник IPv4: `10.0.0.1`, удалённый: `20.0.0.2`
- IPv6 туннеля: `1001::1/64`

![Настройка туннеля на msk-dgavdadaev-gw-01](Screenshot_16.png){ width=70% }

## Настройка туннеля на gw-02

- Интерфейс: `tun0`
- SIT, источник IPv4: `20.0.0.2`, удалённый: `10.0.0.1`
- IPv6 туннеля: `1001::2/64`

![Настройка туннеля на msk-dgavdadaev-gw-02](Screenshot_17.png){ width=70% }

## Статическая маршрутизация IPv6

- На gw-01: маршрут к `1002::/64` через `1001::2`
- На gw-02: маршрут к `1000::/64` через `1001::1`

![Статический IPv6-маршрут на msk-dgavdadaev-gw-01](Screenshot_18.png){ width=70% }

![Статический IPv6-маршрут на msk-dgavdadaev-gw-02](Screenshot_19.png){ width=70% }

## Ping и traceroute с PC1

- Успешный `ping` до `1002::a`
- Трассировка подтверждает прохождение через туннель

![Ping и traceroute с PC1](Screenshot_20.png){ width=70% }

## Ping и traceroute с PC2

- Успешный `ping` до `1000::a`
- Подтверждена симметричная IPv6-доступность

![Ping и traceroute с PC2](Screenshot_21.png){ width=70% }

## Общий вид трафика IPv6 через IPv4

- IPv6-пакеты инкапсулируются в IPv4
- Используется протокол **41**
- IPv4-адреса соответствуют концам туннеля

![Общий вид трафика IPv6 через IPv4](Screenshot_22.png){ width=70% }

## Детализация инкапсуляции

- В полезной нагрузке IPv4 содержится полный IPv6-заголовок
- ICMPv6 Echo Request / Reply видны внутри инкапсуляции

![Детализация инкапсуляции IPv6 в IPv4](Screenshot_23.png){ width=70% }

# Итоги работы

## Заключение

В ходе работы была реализована связность IPv4- и IPv6-сетей в **GNS3**: настроена адресация, динамическая маршрутизация IPv4 (RIP) и туннель **IPv6-over-IPv4 (SIT)** со статической маршрутизацией IPv6. Проверка связности и анализ трафика в **Wireshark** подтвердили корректную работу протоколов **ARP**, **ICMP**, **ICMPv6** и **RIP**, а также механизмов инкапсуляции IPv6 в IPv4 (протокол 41).
